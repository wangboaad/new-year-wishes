<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026Êñ∞Âπ¥ËÆ∏ÊÑø - ÊÑøÊâÄÊúâÁæéÂ•ΩÂ¶ÇÊúüËÄåËá≥</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }

        .title {
            font-size: 3.5em;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            margin-bottom: 10px;
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { text-shadow: 2px 2px 4px rgba(0,0,0,0.3), 0 0 10px #fff, 0 0 20px #fff, 0 0 30px #ff6b6b, 0 0 40px #ff6b6b; }
            to { text-shadow: 2px 2px 4px rgba(0,0,0,0.3), 0 0 20px #fff, 0 0 30px #ff6b6b, 0 0 40px #ff6b6b, 0 0 50px #ff6b6b; }
        }

        .subtitle {
            font-size: 1.2em;
            color: #f0f0f0;
            margin-bottom: 20px;
        }

        .fireworks {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
        }

        .firework {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #ff6b6b;
            border-radius: 50%;
            animation: firework 3s ease-out infinite;
        }

        .firework:nth-child(2n) { background: #4ecdc4; animation-delay: 1s; }
        .firework:nth-child(3n) { background: #45b7d1; animation-delay: 2s; }
        .firework:nth-child(4n) { background: #f9ca24; animation-delay: 0.5s; }
        .firework:nth-child(5n) { background: #f0932b; animation-delay: 1.5s; }

        @keyframes firework {
            0% {
                transform: translateY(100vh) scale(0);
                opacity: 1;
            }
            70% {
                transform: translateY(10vh) scale(1);
                opacity: 1;
            }
            100% {
                transform: translateY(-10vh) scale(0);
                opacity: 0;
            }
        }

        .countdown-section {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .countdown-title {
            font-size: 2em;
            color: #fff;
            margin-bottom: 20px;
        }

        .countdown {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .time-unit {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 20px;
            min-width: 120px;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .time-number {
            font-size: 3em;
            font-weight: bold;
            color: #fff;
            display: block;
        }

        .time-label {
            font-size: 1em;
            color: #f0f0f0;
            margin-top: 5px;
        }

        .audio-controls {
            margin-top: 15px;
        }

        .volume-control {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .volume-label {
            color: #fff;
            font-size: 0.9em;
        }

        .volume-slider {
            width: 150px;
        }

        .sections {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .section {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .section-title {
            font-size: 1.8em;
            color: #fff;
            margin-bottom: 20px;
            text-align: center;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            color: #fff;
            margin-bottom: 8px;
            font-weight: bold;
        }

        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.9);
            font-size: 1em;
            transition: all 0.3s ease;
        }

        .form-input:focus, .form-select:focus, .form-textarea:focus {
            outline: none;
            background: rgba(255, 255, 255, 1);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .form-textarea {
            resize: vertical;
            min-height: 100px;
        }

        .wish-button {
            width: 100%;
            padding: 15px;
            background: linear-gradient(45deg, #ff6b6b, #feca57);
            color: #fff;
            border: none;
            border-radius: 10px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .wish-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 107, 107, 0.4);
        }

        .blessing-section {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .blessing-content {
            font-size: 1.5em;
            color: #fff;
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            border: 1px solid rgba(255, 255, 255, 0.2);
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .blessing-button {
            padding: 12px 30px;
            background: linear-gradient(45deg, #4ecdc4, #45b7d1);
            color: #fff;
            border: none;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
        }

        .blessing-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(78, 205, 196, 0.4);
        }

        .success-message {
            background: rgba(76, 175, 80, 0.9);
            color: #fff;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            font-size: 1.2em;
            margin-top: 20px;
            animation: celebration 1s ease-in-out;
        }

        @keyframes celebration {
            0% { transform: scale(0.8); opacity: 0; }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); opacity: 1; }
        }

        .confetti {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
        }

        .confetti-piece {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #ff6b6b;
            animation: confetti-fall 3s linear infinite;
        }

        .confetti-piece:nth-child(2n) { background: #4ecdc4; animation-delay: 0.5s; }
        .confetti-piece:nth-child(3n) { background: #45b7d1; animation-delay: 1s; }
        .confetti-piece:nth-child(4n) { background: #f9ca24; animation-delay: 1.5s; }
        .confetti-piece:nth-child(5n) { background: #f0932b; animation-delay: 2s; }

        @keyframes confetti-fall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        .fortune-section {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .fortune-title {
            font-size: 2em;
            color: #fff;
            margin-bottom: 20px;
        }

        .fortune-box {
            position: relative;
            width: 200px;
            height: 300px;
            margin: 0 auto 30px;
            background: linear-gradient(145deg, #8B4513, #A0522D);
            border-radius: 20px;
            border: 3px solid #D2691E;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .fortune-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="%23ffffff" opacity="0.1"/><circle cx="75" cy="75" r="1" fill="%23ffffff" opacity="0.1"/><circle cx="50" cy="10" r="0.5" fill="%23ffffff" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            pointer-events: none;
        }

        .fortune-stick {
            position: absolute;
            width: 60px;
            height: 200px;
            background: linear-gradient(45deg, #FFF8DC, #FFFACD);
            border: 2px solid #DAA520;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2em;
            font-weight: bold;
            color: #8B4513;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 10;
            transform: translateY(100px);
        }

        .fortune-stick.normal {
            color: #8B4513;
            background: linear-gradient(45deg, #FFF8DC, #FFFACD);
        }

        .fortune-stick.super-lucky {
            color: #FFD700;
            background: linear-gradient(45deg, #DC143C, #B22222);
            border-color: #FFD700;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
            font-family: 'Ê•∑‰Ωì', 'KaiTi', serif;
        }

        .fortune-stick.popping {
            animation: stickPop 2s ease-out forwards;
        }

        @keyframes stickPop {
            0% { transform: translateY(100px) rotate(0deg); }
            20% { transform: translateY(-20px) rotate(-5deg); }
            40% { transform: translateY(-40px) rotate(5deg); }
            60% { transform: translateY(-30px) rotate(-2deg); }
            80% { transform: translateY(-35px) rotate(2deg); }
            100% { transform: translateY(-35px) rotate(0deg); }
        }

        .fortune-button {
            padding: 15px 40px;
            background: linear-gradient(45deg, #ff6b6b, #feca57);
            color: #fff;
            border: none;
            border-radius: 25px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .fortune-button:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 107, 107, 0.4);
        }

        .fortune-button:disabled {
            background: #666;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .fortune-result {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
        }

        .fortune-card {
            background: linear-gradient(145deg, #fff, #f0f0f0);
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            max-width: 400px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            animation: cardShow 0.5s ease-out;
        }

        @keyframes cardShow {
            0% { transform: scale(0.5) rotateY(180deg); opacity: 0; }
            100% { transform: scale(1) rotateY(0deg); opacity: 1; }
        }

        .fortune-card.super-lucky {
            background: linear-gradient(145deg, #DC143C, #B22222);
            color: #FFD700;
        }

        .fortune-text {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 20px;
            font-family: 'Ê•∑‰Ωì', 'KaiTi', serif;
        }

        .fortune-card.normal .fortune-text {
            color: #8B4513;
            font-family: 'Microsoft YaHei', Arial, sans-serif;
        }

        .fortune-description {
            font-size: 1.2em;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .page-switch {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .my-fortune-page {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            z-index: 3000;
            overflow-y: auto;
        }

        .my-fortune-content {
            max-width: 1000px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .my-fortune-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .back-button {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.2);
            color: #fff;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
        }

        .back-button:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .fortune-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .fortune-item {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }

        .fortune-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .fortune-item.normal .fortune-item-text {
            color: #FFF8DC;
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 10px;
            font-family: 'Microsoft YaHei', Arial, sans-serif;
        }

        .fortune-item.super-lucky {
            background: rgba(220, 20, 60, 0.2);
            border-color: #FFD700;
        }

        .fortune-item.super-lucky .fortune-item-text {
            color: #FFD700;
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 10px;
            font-family: 'Ê•∑‰Ωì', 'KaiTi', serif;
        }

        .fortune-date {
            color: #f0f0f0;
            font-size: 0.9em;
        }

        /* ÊÑøÊúõÂ¢ôÊ†∑Âºè */
        .wish-wall-section {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .wish-wall-title {
            font-size: 1.8em;
            color: #fff;
            margin-bottom: 20px;
            text-align: center;
        }

        .wish-wall-container {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            height: 200px;
            overflow: hidden;
            position: relative;
        }

        .wish-wall {
            position: relative;
            height: 100%;
            width: 100%;
        }

        .wish-item {
            position: absolute;
            right: -300px;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            padding: 12px 20px;
            border-radius: 25px;
            font-size: 1em;
            white-space: nowrap;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            animation: wishScroll 15s linear infinite;
            border: 2px solid rgba(255, 215, 0, 0.5);
            backdrop-filter: blur(5px);
        }

        .wish-item:nth-child(2n) {
            background: rgba(255, 192, 203, 0.9);
            border-color: rgba(255, 105, 180, 0.5);
        }

        .wish-item:nth-child(3n) {
            background: rgba(173, 216, 230, 0.9);
            border-color: rgba(70, 130, 180, 0.5);
        }

        .wish-item:nth-child(4n) {
            background: rgba(144, 238, 144, 0.9);
            border-color: rgba(34, 139, 34, 0.5);
        }

        .wish-item:nth-child(5n) {
            background: rgba(255, 218, 185, 0.9);
            border-color: rgba(255, 140, 0, 0.5);
        }

        @keyframes wishScroll {
            0% {
                transform: translateX(0);
                opacity: 1;
            }
            100% {
                transform: translateX(-150vw);
                opacity: 1;
            }
        }

        .wish-wall-empty {
            text-align: center;
            color: #f0f0f0;
            font-size: 1.2em;
            padding: 60px 20px;
            opacity: 0.7;
        }

        .wish-wall-toggle {
            width: 100%;
            padding: 12px;
            background: linear-gradient(45deg, #9b59b6, #8e44ad);
            color: #fff;
            border: none;
            border-radius: 10px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .wish-wall-toggle:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(155, 89, 182, 0.4);
        }

        /* Â∑≤ËÆ∏ÊÑøÁä∂ÊÄÅÊ†∑Âºè */
        .wish-made-status {
            text-align: center;
            padding: 30px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            border: 1px solid rgba(255, 215, 0, 0.5);
        }

        .made-wish-info h3 {
            color: #FFD700;
            font-size: 1.5em;
            margin-bottom: 20px;
        }

        .made-wish-info p {
            color: #fff;
            font-size: 1.1em;
            margin: 10px 0;
            line-height: 1.5;
        }

        @media (max-width: 768px) {
            .sections {
                grid-template-columns: 1fr;
            }
            
            .title {
                font-size: 2.5em;
            }
            
            .countdown {
                gap: 10px;
            }
            
            .time-unit {
                min-width: 80px;
                padding: 15px;
            }
            
            .time-number {
                font-size: 2em;
            }
            
            .fortune-box {
                width: 150px;
                height: 225px;
            }
            
            .fortune-stick {
                width: 45px;
                height: 150px;
                font-size: 1em;
            }
            
            .fortune-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }

            .wish-wall-container {
                height: 150px;
            }

            .wish-item {
                font-size: 0.9em;
                padding: 10px 15px;
            }
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="fireworks">
            <div class="firework" v-for="i in 20" :key="i" :style="{
                left: Math.random() * 100 + '%',
                animationDelay: Math.random() * 3 + 's'
            }"></div>
        </div>

        <div class="container">
            <div class="header">
                <h1 class="title">üéÜ 2026Êñ∞Âπ¥ËÆ∏ÊÑø üéÜ</h1>
                <p class="subtitle">ÊÑøÊâÄÊúâÁæéÂ•ΩÂ¶ÇÊúüËÄåËá≥</p>
            </div>

            <div class="countdown-section">
                <h2 class="countdown-title">‚è∞ Ë∑ùÁ¶ª2026Âπ¥Êñ∞Âπ¥ËøòÊúâ</h2>
                <div class="countdown">
                    <div class="time-unit">
                        <span class="time-number">{{ days }}</span>
                        <div class="time-label">Â§©</div>
                    </div>
                    <div class="time-unit">
                        <span class="time-number">{{ hours }}</span>
                        <div class="time-label">Êó∂</div>
                    </div>
                    <div class="time-unit">
                        <span class="time-number">{{ minutes }}</span>
                        <div class="time-label">ÂàÜ</div>
                    </div>
                    <div class="time-unit">
                        <span class="time-number">{{ seconds }}</span>
                        <div class="time-label">Áßí</div>
                    </div>
                </div>
                <div class="audio-controls">
                    <div class="volume-control">
                        <span class="volume-label">üîä ËØ≠Èü≥ÊèêÁ§∫Èü≥Èáè:</span>
                        <input type="range" min="0" max="100" v-model="volume" class="volume-slider" @input="updateVolume">
                        <span class="volume-label">{{ volume }}%</span>
                    </div>
                </div>
            </div>

            <div class="sections">
                <div class="section">
                    <h2 class="section-title">üí´ ËÆ∏‰∏ãÊñ∞Âπ¥ÊÑøÊúõ</h2>
                    
                    <!-- Â¶ÇÊûúÂ∑≤ÁªèËÆ∏ËøáÊÑøÔºåÊòæÁ§∫Â∑≤ËÆ∏ÊÑøÁä∂ÊÄÅ -->
                    <div v-if="hasMadeWish" class="wish-made-status">
                        <div class="made-wish-info">
                            <h3>üéä ÊÇ®Â∑≤ÁªèËÆ∏ËøáÊÑø‰∫ÜÔºÅ</h3>
                            <p>ÊÇ®ÁöÑÊÑøÊúõÔºö{{ userWishData?.wish }}</p>
                            <p>ËÆ∏ÊÑøÊó∂Èó¥Ôºö{{ userWishData?.timestamp }}</p>
                        </div>
                        <button @click="viewMyWish" class="wish-button">üìã Êü•ÁúãÊàëÁöÑÊÑøÊúõ</button>
                    </div>
                    
                    <!-- Â¶ÇÊûúÊ≤°ÊúâËÆ∏ËøáÊÑøÔºåÊòæÁ§∫ËÆ∏ÊÑøË°®Âçï -->
                    <form v-else @submit.prevent="makeWish">
                        <div class="form-group">
                            <label class="form-label">ÂßìÂêç:</label>
                            <input type="text" v-model="wishForm.name" class="form-input" placeholder="ËØ∑ËæìÂÖ•ÊÇ®ÁöÑÂßìÂêç" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">ÊÄßÂà´:</label>
                            <select v-model="wishForm.gender" class="form-select" required>
                                <option value="">ËØ∑ÈÄâÊã©ÊÄßÂà´</option>
                                <option value="Áî∑">Áî∑</option>
                                <option value="Â•≥">Â•≥</option>
                                <option value="ÂÖ∂‰ªñ">ÂÖ∂‰ªñ</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">ÁîüÊó•:</label>
                            <input type="date" v-model="wishForm.birthday" class="form-input" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Êñ∞Âπ¥ÊÑøÊúõ (100Â≠ó‰ª•ÂÜÖ):</label>
                            <textarea v-model="wishForm.wish" class="form-textarea" placeholder="ËØ∑ÂÜô‰∏ãÊÇ®ÁöÑÊñ∞Âπ¥ÊÑøÊúõ..." maxlength="100" required></textarea>
                            <small style="color: #f0f0f0;">{{ wishForm.wish.length }}/100 Â≠ó</small>
                        </div>
                        <button type="submit" class="wish-button">‚ú® ËÆ∏‰∏ãÊÑøÊúõ ‚ú®</button>
                    </form>
                    
                    <div v-if="showSuccess" class="success-message">
                        üéâ ÊÑøÊñ∞ÁöÑ‰∏ÄÂπ¥‰Ω†ÁöÑÊÑøÊúõ‰ºöË¢´ÂÆûÁé∞ÔºÅüéÜüéÜüéÜ
                    </div>
                </div>

                <div class="section">
                    <h2 class="section-title">üéä Êñ∞Âπ¥Á•ùÁ¶èËØ≠</h2>
                    <div class="blessing-content">
                        {{ currentBlessing }}
                    </div>
                    <button @click="generateBlessing" class="blessing-button">üé≤ Êç¢‰∏ÄÂè•Á•ùÁ¶è</button>
                    <button @click="copyBlessing" class="blessing-button">üìã Â§çÂà∂Á•ùÁ¶èËØ≠</button>
                </div>
            </div>

            <div class="fortune-section">
                <h2 class="fortune-title">üéØ ÊäΩÂèñÁ•àÊÑøÁ≠æ</h2>
                <div class="fortune-box">
                    <div 
                        class="fortune-stick" 
                        :class="[fortuneStickType, { popping: isDrawing }]"
                        @click="drawFortune"
                        :style="{ transform: isDrawing ? '' : 'translateY(100px)' }"
                    >
                        {{ currentFortuneText }}
                    </div>
                </div>
                <button 
                    @click="drawFortune" 
                    class="fortune-button"
                    :disabled="hasDrawnToday"
                >
                    {{ hasDrawnToday ? '‰ªäÊó•Â∑≤ÊäΩÁ≠æ' : 'üéØ ÊäΩÂèñÁ•àÊÑøÁ≠æ' }}
                </button>
                <button @click="showMyFortune" class="fortune-button">
                    üìã ÊàëÁöÑÁ•àÊÑøÁ≠æ ({{ myFortunes.length }})
                </button>
            </div>

            <div class="wish-wall-section">
                <h2 class="wish-wall-title">üíå ÊÑøÊúõÂ¢ô</h2>
                <div class="wish-wall-container">
                    <div class="wish-wall" v-if="wishWallVisible && wishWall.length > 0">
                        <div 
                            v-for="(wish, index) in currentWishDisplay" 
                            :key="index"
                            class="wish-item"
                            :style="{
                                top: (index * 60) + 'px',
                                animationDelay: (index * 2) + 's'
                            }"
                        >
                            {{ wish.name }}Ôºö{{ wish.wish }}
                        </div>
                    </div>
                    <div v-else class="wish-wall-empty">
                        ËøòÊ≤°Êúâ‰∫∫ËÆ∏ÊÑøÔºåÂø´Êù•ËÆ∏‰∏ãÁ¨¨‰∏Ä‰∏™ÊÑøÊúõÂêßÔºÅ‚ú®
                    </div>
                </div>
                <button @click="toggleWishWall" class="wish-wall-toggle">
                    {{ wishWallVisible ? 'ÈöêËóèÊÑøÊúõÂ¢ô' : 'ÊòæÁ§∫ÊÑøÊúõÂ¢ô' }}
                </button>
            </div>

            <div v-if="showFortuneResult" class="fortune-result" @click="closeFortuneResult">
                <div class="fortune-card" :class="fortuneResult.type" @click.stop>
                    <div class="fortune-text">{{ fortuneResult.text }}</div>
                    <div class="fortune-description">
                        {{ fortuneResult.description }}
                    </div>
                    <button @click="saveFortune" class="fortune-button">
                        üíæ Êî∂ÂèñÁ•àÊÑøÁ≠æ
                    </button>
                </div>
            </div>

            <div v-if="showMyFortunePage" class="my-fortune-page">
                <div class="my-fortune-content">
                    <div class="my-fortune-header">
                        <h2 style="color: #fff; font-size: 2em;">üìã ÊàëÁöÑÁ•àÊÑøÁ≠æ</h2>
                        <button @click="closeMyFortune" class="back-button">‚Üê ËøîÂõû‰∏ªÈ°µ</button>
                    </div>
                    
                    <div v-if="myFortunes.length === 0" style="text-align: center; color: #fff; font-size: 1.2em;">
                        ËøòÊ≤°ÊúâÊäΩÂèñËøáÁ•àÊÑøÁ≠æÔºåÂéªÊäΩÂèñ‰∏Ä‰∏™ÂêßÔºÅüéØ
                    </div>
                    
                    <div v-else class="fortune-grid">
                        <div 
                            v-for="fortune in myFortunes" 
                            :key="fortune.id"
                            class="fortune-item"
                            :class="fortune.type"
                        >
                            <div class="fortune-item-text">{{ fortune.text }}</div>
                            <div class="fortune-date">{{ fortune.date }}</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="confetti">
            <div class="confetti-piece" v-for="i in 50" :key="'confetti-' + i" :style="{
                left: Math.random() * 100 + '%',
                animationDelay: Math.random() * 3 + 's',
                animationDuration: (Math.random() * 2 + 2) + 's'
            }"></div>
        </div>
    </div>

    <script>
        const { createApp } = Vue;

        createApp({
            data() {
                return {
                    targetDate: new Date('2026-01-01T00:00:00'),
                    currentTime: new Date(),
                    days: 0,
                    hours: 0,
                    minutes: 0,
                    seconds: 0,
                    countdownInterval: null,
                    volume: 50,
                    audioContext: null,
                    lastMinute: null,
                    
                    wishForm: {
                        name: '',
                        gender: '',
                        birthday: '',
                        wish: ''
                    },
                    
                    showSuccess: false,
                    
                    blessings: [
                        'üéä Êñ∞Âπ¥Âø´‰πêÔºÅÊÑø‰Ω†2026Âπ¥ÊâÄÊúâÁöÑÁæéÂ•ΩÈÉΩÂ¶ÇÊúüËÄåËá≥ÔºÅ',
                        'üåü Êñ∞ÁöÑ‰∏ÄÂπ¥ÔºåÊñ∞ÁöÑÂºÄÂßãÔºåÊÑø‰Ω†ÁöÑ‰∫∫ÁîüÊõ¥Âä†Á≤æÂΩ©ÔºÅ',
                        'üéà Á•ù‰Ω†Âú®Êñ∞ÁöÑ‰∏ÄÂπ¥ÈáåÔºåÂ∑•‰ΩúÈ°∫Âà©ÔºåË∫´‰ΩìÂÅ•Â∫∑ÔºåÈòñÂÆ∂Âπ∏Á¶èÔºÅ',
                        'üéâ ÊÑø2026Âπ¥Â∏¶Áªô‰Ω†Êó†Â∞ΩÁöÑÊ¨¢‰πêÂíåÊó†ÈôêÁöÑÂèØËÉΩÔºÅ',
                        'üåà Êñ∞Âπ¥Êñ∞Ê∞îË±°ÔºåÊÑø‰Ω†ÁöÑÁîüÊ¥ªÂ¶ÇÂΩ©ËôπËà¨ÁªöÁÉÇÂ§öÂΩ©ÔºÅ',
                        'üíñ Á•ù‰Ω†Êñ∞Âπ¥Âø´‰πêÔºåÊÑøÊâÄÊúâÁöÑÂøÉÊÑøÈÉΩËÉΩÂú®Êñ∞ÁöÑ‰∏ÄÂπ¥ÂÆûÁé∞ÔºÅ',
                        'üéÜ ËæûÊóßËøéÊñ∞ÔºåÊÑø‰Ω†Âú®Êñ∞ÁöÑ‰∏ÄÂπ¥ÈáåÊî∂Ëé∑Êª°Êª°ÔºÅ',
                        'ü¶ã Êñ∞Âπ¥Âà∞Êù•ÔºåÊÑø‰Ω†ÂÉèËù¥Ëù∂‰∏ÄÊ†∑Ëá™Áî±È£ûËàûÔºåÊã•Êä±ÁæéÂ•ΩÔºÅ',
                        'üå∏ Ëä±ÂºÄÂØåË¥µÔºåÊÅ≠ÂñúÂèëË¥¢ÔºÅÁ•ùÊÇ®Êñ∞Âπ¥Ë°åÂ§ßËøêÔºÅ',
                        'üé™ Êñ∞Âπ¥Êñ∞Â∏åÊúõÔºåÊÑø‰Ω†ÁöÑÊØè‰∏ÄÂ§©ÈÉΩÂÖÖÊª°ÊÉäÂñúÂíåÂø´‰πêÔºÅ',
                        'üåü ÊòüÂÖâ‰∏çË¥üËµ∂Ë∑Ø‰∫∫ÔºåÊó∂ÂÖâ‰∏çË¥üÊúâÂøÉ‰∫∫„ÄÇÊñ∞Âπ¥Âø´‰πêÔºÅ',
                        'üéä Êñ∞Âπ¥Â∞ÜËá≥ÔºåÊÑø‰Ω†ÂøÉ‰∏≠ÊúâÂÖâÔºåËÑö‰∏ãÊúâË∑ØÔºåÊú™Êù•ÂèØÊúüÔºÅ',
                        'üåà Êñ∞Âπ¥Âø´‰πêÔºÅÊÑø‰Ω†Âú®Êñ∞ÁöÑ‰∏ÄÂπ¥ÈáåÔºåÂπ≥ÂÆâÂñú‰πêÔºåÂæóÂÅøÊâÄÊÑøÔºÅ',
                        'üéà ÂëäÂà´2025ÔºåÊã•Êä±2026„ÄÇÊÑø‰Ω†Êñ∞Âπ¥Êñ∞Ê∞îË±°ÔºÅ',
                        'üåü Êñ∞Âπ¥Â•ΩÔºÅÊÑø‰Ω†Âú®Ëøô‰∏™ÁâπÊÆäÁöÑÊó•Â≠êÈáåÊî∂Ëé∑Êª°Êª°ÁöÑÂπ∏Á¶èÔºÅ',
                        'üéâ 2026Êñ∞Âπ¥Âø´‰πêÔºÅÊÑøÊâÄÊúâÁöÑÁæéÂ•ΩÈÉΩ‰∏é‰Ω†‰∏çÊúüËÄåÈÅáÔºÅ',
                        'üí´ Êñ∞Âπ¥Âà∞Êù•ÔºåÊÑø‰Ω†ÁöÑ‰∫∫ÁîüÁøªÂºÄÂ¥≠Êñ∞ÁöÑ‰∏ÄÈ°µÔºÅ',
                        'üéÜ ÁÉüËä±ÁªöÁÉÇËøéÊñ∞Âπ¥ÔºåÊÑø‰Ω†ÁöÑ2026Âπ¥Â¶ÇÁÉüËä±Ëà¨ÁªöÁÉÇÔºÅ',
                        'üå∫ Êñ∞Âπ¥Âø´‰πêÔºÅÊÑø‰Ω†ÂÉèËä±ÂÑø‰∏ÄÊ†∑Áæé‰∏ΩÁªΩÊîæÔºÅ',
                        'ü¶Ñ Êñ∞Âπ¥Êñ∞ÂºÄÂßãÔºåÊÑø‰Ω†ÁöÑÁîüÊ¥ªÂÉèÁ´•ËØù‰∏ÄÊ†∑ÁæéÂ•ΩÔºÅ'
                    ],
                    currentBlessing: '',
                    
                    // Á•àÊÑøÁ≠æÁõ∏ÂÖ≥Êï∞ÊçÆ
                    fortuneSticks: [
                        'Âπ≥Âπ≥ÂÆâÂÆâ', 'Â≠¶‰∏öÊúâÊàê', 'Â∑•‰ΩúÈ°∫Âà©', 'Ë∫´‰ΩìÂÅ•Â∫∑', 'ÈòñÂÆ∂Âπ∏Á¶è',
                        'ÂøÉÊÉ≥‰∫ãÊàê', '‰∏á‰∫ãÂ¶ÇÊÑè', 'ÊÅ≠ÂñúÂèëË¥¢', 'Â§ßÂêâÂ§ßÂà©', '‰∏ÄÂ∏ÜÈ£éÈ°∫',
                        '‰∫åÈæôËÖæÈ£û', '‰∏âÈò≥ÂºÄÊ≥∞', 'ÂõõÂ≠£Âπ≥ÂÆâ', '‰∫îÁ¶è‰∏¥Èó®', 'ÂÖ≠ÂÖ≠Â§ßÈ°∫',
                        '‰∏ÉÊòüÈ´òÁÖß', 'ÂÖ´ÊñπÊù•Ë¥¢', '‰πù‰πùÂΩí‰∏Ä', 'ÂçÅÂÖ®ÂçÅÁæé', 'ÈáëÊ¶úÈ¢òÂêç',
                        'ÂâçÁ®ã‰ººÈî¶', 'ÈπèÁ®ã‰∏áÈáå', 'Ê≠•Ê≠•È´òÂçá', 'Ëí∏Ëí∏Êó•‰∏ä', 'Ë¥¢Ê∫êÂπøËøõ',
                        'Â≤ÅÂ≤ÅÂπ≥ÂÆâ', 'Âπ¥Âπ¥Êúâ‰Ωô', 'Ëä±Â•ΩÊúàÂúÜ', 'Âõ¢Âõ¢ÂúÜÂúÜ', 'ÂíåÂíåÁæéÁæé',
                        'ÁîúÁîúËúúËúú', 'ÊÅ©ÊÅ©Áà±Áà±', 'Ê∞∏ÁªìÂêåÂøÉ', 'ÁôΩÂ§¥ÂÅïËÄÅ', 'Êó©ÁîüË¥µÂ≠ê',
                        'ËÅ™Êòé‰º∂‰øê', 'Ê¥ªÊ≥ºÂèØÁà±', 'Âø´‰πêÊàêÈïø', 'ËÅ™ÊòéÊâçÊô∫', 'ÂçöÂ≠¶Â§öÊâç',
                        'ÊâçÂçéÊ®™Ê∫¢', 'Âá∫Á±ªÊãîËêÉ', 'Áã¨Ê†ë‰∏ÄÂ∏ú', 'Ê†áÊñ∞Á´ãÂºÇ', 'Âà´Âá∫ÂøÉË£Å',
                        'Á≤æÁõäÊ±ÇÁ≤æ', 'Â∞ΩÂñÑÂ∞ΩÁæé', 'ÁæéËΩÆÁæéÂ•Ç', 'Â∑ßÂ§∫Â§©Â∑•', 'È¨ºÊñßÁ•ûÂ∑•',
                        'Á¶èÊòüÈ´òÁÖß', 'Ë¥µ‰∫∫Áõ∏Âä©', 'ÈÄ¢Âá∂ÂåñÂêâ', 'ÈÅáÈöæÂëàÁ••', 'Âê¶ÊûÅÊ≥∞Êù•',
                        'ËΩ¨Âç±‰∏∫ÂÆâ', 'ÂåñÈô©‰∏∫Â§∑', 'ÂÆâÂ¶ÇÊ≥∞Â±±', 'Á®≥Â¶ÇÁ£êÁü≥', 'ÂÆâÂ¶ÇÁ£êÁü≥',
                        'È©¨Âà∞ÊàêÂäü', 'ÊóóÂºÄÂæóËÉú', 'ÁôæÊàòÁôæËÉú', 'ÊàòÊó†‰∏çËÉú', 'ÊîªÊó†‰∏çÂÖã',
                        'Êó†ÂæÄ‰∏çÂà©', 'È°∫È£éÈ°∫Ê∞¥', 'Ê∞¥Âà∞Ê∏†Êàê', 'ÁìúÁÜüËíÇËêΩ', 'Ê∞¥ËêΩÁü≥Âá∫',
                        'ÁúüÁõ∏Â§ßÁôΩ', 'Ê∞¥Ê∏ÖÊúàÊòé', 'ÊúàÁôΩÈ£éÊ∏Ö', 'È£éË∞ÉÈõ®È°∫', 'ÂõΩÊ≥∞Ê∞ëÂÆâ',
                        'È£éËµ∑‰∫ëÊ∂å', '‰∫ëËí∏ÈúûËîö', 'ÈúûÂÖâ‰∏áÈÅì', 'ÂÖâËäí‰∏á‰∏à', 'ÂÖâËæâÁÅøÁÉÇ',
                        'ÁíÄÁí®Â§∫ÁõÆ', 'ÁªöÁÉÇÂ§öÂΩ©', '‰∫îÂΩ©ÊñëÊñì', 'Ëâ≤ÂΩ©ÊñëÊñì', '‰∏áÁ¥´ÂçÉÁ∫¢',
                        'Êò•ÊöñËä±ÂºÄ', 'Êò•ÊÑèÁõéÁÑ∂', 'Êò•Ëä±ÁßãÊúà', 'Ëä±Âõ¢Èî¶Á∞á', 'Êü≥ÊöóËä±Êòé',
                        'Â±±Ê∏ÖÊ∞¥ÁßÄ', 'È∏üËØ≠Ëä±È¶ô', 'È£éÊôØÂ¶ÇÁîª', 'Áæé‰∏çËÉúÊî∂', 'ËµèÂøÉÊÇ¶ÁõÆ',
                        'Ê≤Å‰∫∫ÂøÉËÑæ', 'ÂøÉÊó∑Á•ûÊÄ°', 'Á•ûÊ∏ÖÊ∞îÁàΩ', 'Á≤æÁ•ûÁÑïÂèë', 'ÂÆπÂÖâÁÑïÂèë'
                    ],
                    hasDrawnToday: false,
                    isDrawing: false,
                    showFortuneResult: false,
                    showMyFortunePage: false,
                    fortuneResult: {
                        text: '',
                        type: 'normal',
                        description: ''
                    },
                    currentFortuneText: 'Á•àÊÑøÁ≠æ',
                    myFortunes: [],
                    
                    // ÊÑøÊúõÂ¢ôÁõ∏ÂÖ≥Êï∞ÊçÆ
                    wishWall: [],
                    wishWallInterval: null,
                    currentWishDisplay: [],
                    wishWallVisible: true,
                    currentWishIndex: 0,
                    
                    // ËÆæÂ§áËØÜÂà´ÂíåÁî®Êà∑ÁÆ°ÁêÜ
                    deviceId: '',
                    hasMadeWish: false,
                    userWishData: null,
                    
                    // Firebase ÈÖçÁΩÆ
                    firebaseInitialized: false,
                    firebaseError: null
                };
            },
            
            mounted() {
                this.generateBlessing();
                this.startCountdown();
                this.initAudio();
                this.initFirebase();
                this.loadMyFortunes();
                this.checkDailyDraw();
                this.initWishWall();
                this.initDevice();
            },
            
            beforeUnmount() {
                if (this.countdownInterval) {
                    clearInterval(this.countdownInterval);
                }
            },
            
            methods: {
                startCountdown() {
                    this.updateCountdown();
                    this.countdownInterval = setInterval(() => {
                        this.updateCountdown();
                    }, 1000);
                },
                
                updateCountdown() {
                    this.currentTime = new Date();
                    const difference = this.targetDate - this.currentTime;
                    
                    if (difference > 0) {
                        this.days = Math.floor(difference / (1000 * 60 * 60 * 24));
                        this.hours = Math.floor((difference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                        this.minutes = Math.floor((difference % (1000 * 60 * 60)) / (1000 * 60));
                        this.seconds = Math.floor((difference % (1000 * 60)) / 1000);
                        
                        this.checkForVoiceAlert();
                    } else {
                        this.days = 0;
                        this.hours = 0;
                        this.minutes = 0;
                        this.seconds = 0;
                        this.playNewYearSound();
                    }
                },
                
                checkForVoiceAlert() {
                    const totalMinutes = this.days * 24 * 60 + this.hours * 60 + this.minutes;
                    
                    if (totalMinutes <= 1 && this.lastMinute !== this.minutes) {
                        this.lastMinute = this.minutes;
                        this.playVoiceAlert();
                    }
                },
                
                initAudio() {
                    try {
                        this.audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    } catch (e) {
                        console.log('Èü≥È¢ë‰∏ä‰∏ãÊñáÂàùÂßãÂåñÂ§±Ë¥•');
                    }
                },
                
                updateVolume() {
                },
                
                playVoiceAlert() {
                    if (!this.audioContext) return;
                    
                    try {
                        const oscillator = this.audioContext.createOscillator();
                        const gainNode = this.audioContext.createGain();
                        
                        oscillator.connect(gainNode);
                        gainNode.connect(this.audioContext.destination);
                        
                        oscillator.frequency.setValueAtTime(800, this.audioContext.currentTime);
                        gainNode.gain.setValueAtTime(0, this.audioContext.currentTime);
                        gainNode.gain.linearRampToValueAtTime(this.volume / 100 * 0.3, this.audioContext.currentTime + 0.1);
                        gainNode.gain.exponentialRampToValueAtTime(0.001, this.audioContext.currentTime + 1);
                        
                        oscillator.start(this.audioContext.currentTime);
                        oscillator.stop(this.audioContext.currentTime + 1);
                    } catch (e) {
                        console.log('ËØ≠Èü≥ÊèêÁ§∫Êí≠ÊîæÂ§±Ë¥•');
                    }
                },
                
                playNewYearSound() {
                    if (!this.audioContext) return;
                    
                    try {
                        for (let i = 0; i < 3; i++) {
                            setTimeout(() => {
                                const oscillator = this.audioContext.createOscillator();
                                const gainNode = this.audioContext.createGain();
                                
                                oscillator.connect(gainNode);
                                gainNode.connect(this.audioContext.destination);
                                
                                oscillator.frequency.setValueAtTime(1000, this.audioContext.currentTime);
                                gainNode.gain.setValueAtTime(0, this.audioContext.currentTime);
                                gainNode.gain.linearRampToValueAtTime(this.volume / 100 * 0.5, this.audioContext.currentTime + 0.1);
                                gainNode.gain.exponentialRampToValueAtTime(0.001, this.audioContext.currentTime + 1);
                                
                                oscillator.start(this.audioContext.currentTime);
                                oscillator.stop(this.audioContext.currentTime + 1);
                            }, i * 500);
                        }
                    } catch (e) {
                        console.log('Êñ∞Âπ¥Èü≥‰πêÊí≠ÊîæÂ§±Ë¥•');
                    }
                },
                
                makeWish() {
                    // Ê£ÄÊü•ÊòØÂê¶Â∑≤ÁªèËÆ∏ËøáÊÑø
                    if (this.hasMadeWish) {
                        alert('ÊÇ®Â∑≤ÁªèËÆ∏ËøáÊÑø‰∫ÜÔºÅÊØè‰∫∫Âè™ËÉΩËÆ∏ÊÑø‰∏ÄÊ¨°Âì¶ÔΩû üéä');
                        return;
                    }

                    this.showSuccess = true;
                    this.createConfetti();
                    
                    // ‰øùÂ≠òÁî®Êà∑ËÆ∏ÊÑøÊï∞ÊçÆ
                    this.saveUserWish(this.wishForm);
                    
                    // Â∞ÜÊÑøÊúõÊ∑ªÂä†Âà∞ÊÑøÊúõÂ¢ô
                    this.addWishToWall(this.wishForm);
                    
                    // ÂêåÊ≠•Âà∞‰∫ëÁ´ØÔºàÂ¶ÇÊûúÊúâFirebaseÔºâ
                    if (this.firebaseInitialized) {
                        this.syncWishToCloud(this.wishForm);
                    }
                    
                    setTimeout(() => {
                        this.showSuccess = false;
                        // ‰∏çÊ∏ÖÁ©∫Ë°®ÂçïÔºåÊòæÁ§∫Áî®Êà∑Â∑≤ËÆ∏ÊÑøÁöÑÁä∂ÊÄÅ
                    }, 3000);
                },
                
                generateBlessing() {
                    const randomIndex = Math.floor(Math.random() * this.blessings.length);
                    this.currentBlessing = this.blessings[randomIndex];
                },
                
                copyBlessing() {
                    navigator.clipboard.writeText(this.currentBlessing).then(() => {
                        alert('Á•ùÁ¶èËØ≠Â∑≤Â§çÂà∂Âà∞Ââ™Ë¥¥ÊùøÔºÅüéâ');
                    }).catch(() => {
                        alert('Â§çÂà∂Â§±Ë¥•ÔºåËØ∑ÊâãÂä®Â§çÂà∂');
                    });
                },
                
                createConfetti() {
                    const confettiContainer = document.querySelector('.confetti');
                    if (!confettiContainer) return;
                    
                    for (let i = 0; i < 30; i++) {
                        const confetti = document.createElement('div');
                        confetti.className = 'confetti-piece';
                        confetti.style.left = Math.random() * 100 + '%';
                        confetti.style.animationDelay = Math.random() * 2 + 's';
                        confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';
                        
                        confettiContainer.appendChild(confetti);
                        
                        setTimeout(() => {
                            confetti.remove();
                        }, 4000);
                    }
                },

                // Á•àÊÑøÁ≠æÁõ∏ÂÖ≥ÊñπÊ≥ï
                checkDailyDraw() {
                    const today = new Date().toDateString();
                    const lastDraw = localStorage.getItem('lastFortuneDraw');
                    this.hasDrawnToday = lastDraw === today;
                },

                loadMyFortunes() {
                    const saved = localStorage.getItem('myFortunes');
                    if (saved) {
                        this.myFortunes = JSON.parse(saved);
                    }
                },

                saveMyFortunes() {
                    localStorage.setItem('myFortunes', JSON.stringify(this.myFortunes));
                },

                drawFortune() {
                    if (this.hasDrawnToday || this.isDrawing) return;
                    
                    this.isDrawing = true;
                    this.currentFortuneText = 'ÊäΩÁ≠æ‰∏≠...';
                    
                    setTimeout(() => {
                        // 1% Ê¶ÇÁéáÊäΩÂà∞Ë∂ÖÁ∫ßÂπ∏ËøêÁ≠æ
                        const isSuperLucky = Math.random() < 0.01;
                        
                        let fortuneText, description, type;
                        
                        if (isSuperLucky) {
                            fortuneText = 'Êñ∞ÁöÑ‰∏ÄÂπ¥ ËøêÊ∞îÈÄÜÂ§©';
                            description = 'üéâ ÊÅ≠ÂñúÔºÅÊÇ®ÊäΩÂà∞‰∫ÜË∂ÖÁ∫ßÂπ∏ËøêÁ≠æÔºÅËøôÊÑèÂë≥ÁùÄÊÇ®Âú®2026Âπ¥Â∞Ü‰ºöÊã•ÊúâË∂Ö‰πéÂØªÂ∏∏ÁöÑÂ•ΩËøêÔºåÊâÄÊúâÁöÑ‰∫ãÊÉÖÈÉΩ‰ºöÊúùÁùÄÊúÄÂ•ΩÁöÑÊñπÂêëÂèëÂ±ïÔºÅ';
                            type = 'super-lucky';
                            this.createSuperLuckyConfetti();
                        } else {
                            const randomIndex = Math.floor(Math.random() * this.fortuneSticks.length);
                            fortuneText = this.fortuneSticks[randomIndex];
                            description = this.getFortuneDescription(fortuneText);
                            type = 'normal';
                        }
                        
                        this.fortuneResult = {
                            text: fortuneText,
                            type: type,
                            description: description
                        };
                        
                        this.showFortuneResult = true;
                        this.isDrawing = false;
                        
                        // Ê†áËÆ∞‰ªäÂ§©Â∑≤ÁªèÊäΩËøáÁ≠æ
                        const today = new Date().toDateString();
                        localStorage.setItem('lastFortuneDraw', today);
                        this.hasDrawnToday = true;
                    }, 2000);
                },

                getFortuneDescription(text) {
                    const descriptions = {
                        'Âπ≥Âπ≥ÂÆâÂÆâ': 'ÊÑøÊÇ®Âú®Êñ∞ÁöÑ‰∏ÄÂπ¥ÈáåÂπ≥Âπ≥ÂÆâÂÆâÔºåË∫´‰ΩìÂÅ•Â∫∑Ôºå‰∏á‰∫ãÂ¶ÇÊÑèÔºÅ',
                        'Â≠¶‰∏öÊúâÊàê': 'Á•ùÊÇ®Â≠¶‰∏öËøõÊ≠•ÔºåÂ≠¶ÊúâÊâÄÊàêÔºåÈáëÊ¶úÈ¢òÂêçÔºÅ',
                        'Â∑•‰ΩúÈ°∫Âà©': 'ÊÑøÊÇ®Â∑•‰ΩúÈ°∫Âà©Ôºå‰∫ã‰∏öÊúâÊàêÔºåÂçáËÅåÂä†Ëñ™ÔºÅ',
                        'Ë∫´‰ΩìÂÅ•Â∫∑': 'Á•ùÊÇ®Ë∫´‰ΩìÂÅ•Â∫∑ÔºåÁ≤æÁ•ûÈ•±Êª°ÔºåÊ¥ªÂäõÂõõÂ∞ÑÔºÅ',
                        'ÈòñÂÆ∂Âπ∏Á¶è': 'ÊÑøÊÇ®ÈòñÂÆ∂Âπ∏Á¶èÁæéÊª°ÔºåÂÆ∂‰∫∫ÂÅ•Â∫∑Âø´‰πêÔºÅ',
                        'ÂøÉÊÉ≥‰∫ãÊàê': 'Á•ùÊÇ®ÂøÉÊÉ≥‰∫ãÊàêÔºåÊâÄÊúâÊÑøÊúõÈÉΩËÉΩÂÆûÁé∞ÔºÅ',
                        '‰∏á‰∫ãÂ¶ÇÊÑè': 'ÊÑøÊÇ®‰∏á‰∫ãÂ¶ÇÊÑèÔºåÂ•ΩËøêËøûËøûÔºÅ',
                        'ÊÅ≠ÂñúÂèëË¥¢': 'Á•ùÊÇ®Ë¥¢Ê∫êÂπøËøõÔºåÊÅ≠ÂñúÂèëË¥¢ÔºÅ',
                        'Â§ßÂêâÂ§ßÂà©': 'ÊÑøÊÇ®Â§ßÂêâÂ§ßÂà©ÔºåÂ•ΩËøêÂ∏∏‰º¥ÔºÅ',
                        '‰∏ÄÂ∏ÜÈ£éÈ°∫': 'Á•ùÊÇ®‰∏ÄÂ∏ÜÈ£éÈ°∫Ôºå‰∫ã‰∫ãÈ°∫Âà©ÔºÅ',
                        '‰∫åÈæôËÖæÈ£û': 'ÊÑøÊÇ®Â¶ÇÈæôËÖæÈ£ûÔºå‰∫ã‰∏öËí∏Ëí∏Êó•‰∏äÔºÅ',
                        '‰∏âÈò≥ÂºÄÊ≥∞': 'Á•ùÊÇ®‰∏âÈò≥ÂºÄÊ≥∞Ôºå‰∏áË±°Êõ¥Êñ∞ÔºÅ',
                        'ÂõõÂ≠£Âπ≥ÂÆâ': 'ÊÑøÊÇ®ÂõõÂ≠£Âπ≥ÂÆâÔºåÊó∂Êó∂Â•ΩËøêÔºÅ',
                        '‰∫îÁ¶è‰∏¥Èó®': 'Á•ùÊÇ®‰∫îÁ¶è‰∏¥Èó®ÔºåÁ¶èÊòüÈ´òÁÖßÔºÅ',
                        'ÂÖ≠ÂÖ≠Â§ßÈ°∫': 'ÊÑøÊÇ®ÂÖ≠ÂÖ≠Â§ßÈ°∫Ôºå‰∏á‰∫ãÈ°∫ÂøÉÔºÅ',
                        '‰∏ÉÊòüÈ´òÁÖß': 'Á•ùÊÇ®‰∏ÉÊòüÈ´òÁÖßÔºåË¥µ‰∫∫Áõ∏Âä©ÔºÅ',
                        'ÂÖ´ÊñπÊù•Ë¥¢': 'ÊÑøÊÇ®ÂÖ´ÊñπÊù•Ë¥¢ÔºåË¥¢Ê∫êÊªöÊªöÔºÅ',
                        '‰πù‰πùÂΩí‰∏Ä': 'Á•ùÊÇ®‰πù‰πùÂΩí‰∏ÄÔºåÂçÅÂÖ®ÂçÅÁæéÔºÅ',
                        'ÂçÅÂÖ®ÂçÅÁæé': 'ÊÑøÊÇ®ÂçÅÂÖ®ÂçÅÁæéÔºåÂÆåÁæéÊó†Áº∫ÔºÅ',
                        'ÈáëÊ¶úÈ¢òÂêç': 'Á•ùÊÇ®ÈáëÊ¶úÈ¢òÂêçÔºåÂ≠¶‰∏öÊúâÊàêÔºÅ',
                        'ÂâçÁ®ã‰ººÈî¶': 'ÊÑøÊÇ®ÂâçÁ®ã‰ººÈî¶ÔºåÊú™Êù•ÂÖâÊòéÔºÅ',
                        'ÈπèÁ®ã‰∏áÈáå': 'Á•ùÊÇ®ÈπèÁ®ã‰∏áÈáåÔºåÂâçÁ®ãÊó†ÈáèÔºÅ',
                        'Ê≠•Ê≠•È´òÂçá': 'ÊÑøÊÇ®Ê≠•Ê≠•È´òÂçáÔºåËí∏Ëí∏Êó•‰∏äÔºÅ',
                        'Ëí∏Ëí∏Êó•‰∏ä': 'Á•ùÊÇ®‰∫ã‰∏öËí∏Ëí∏Êó•‰∏äÔºåÁîüÊ¥ªÁæéÊª°ÔºÅ',
                        'Ë¥¢Ê∫êÂπøËøõ': 'ÊÑøÊÇ®Ë¥¢Ê∫êÂπøËøõÔºåË¥¢Ê∫êÊªöÊªöÔºÅ',
                        'Â≤ÅÂ≤ÅÂπ≥ÂÆâ': 'Á•ùÊÇ®Â≤ÅÂ≤ÅÂπ≥ÂÆâÔºåÂπ¥Âπ¥ÂÅ•Â∫∑ÔºÅ',
                        'Âπ¥Âπ¥Êúâ‰Ωô': 'ÊÑøÊÇ®Âπ¥Âπ¥Êúâ‰ΩôÔºåÁîüÊ¥ªÂØåË∂≥ÔºÅ',
                        'Ëä±Â•ΩÊúàÂúÜ': 'Á•ùÊÇ®Ëä±Â•ΩÊúàÂúÜÔºåÈòñÂÆ∂Âõ¢ÂúÜÔºÅ',
                        'Âõ¢Âõ¢ÂúÜÂúÜ': 'ÊÑøÊÇ®Âõ¢Âõ¢ÂúÜÂúÜÔºåÂÆ∂Â∫≠ÂíåÁù¶ÔºÅ',
                        'ÂíåÂíåÁæéÁæé': 'Á•ùÊÇ®ÂíåÂíåÁæéÁæéÔºåÂπ∏Á¶èÁæéÊª°ÔºÅ',
                        'ÁîúÁîúËúúËúú': 'ÊÑøÊÇ®ÁîúÁîúËúúËúúÔºåÁà±ÊÉÖÁæéÊª°ÔºÅ',
                        'ÊÅ©ÊÅ©Áà±Áà±': 'Á•ùÊÇ®ÊÅ©ÊÅ©Áà±Áà±ÔºåÁôΩÂ§¥ÂÅïËÄÅÔºÅ',
                        'Ê∞∏ÁªìÂêåÂøÉ': 'ÊÑøÊÇ®Ê∞∏ÁªìÂêåÂøÉÔºåÁôæÂπ¥Â•ΩÂêàÔºÅ',
                        'ÁôΩÂ§¥ÂÅïËÄÅ': 'Á•ùÊÇ®ÁôΩÂ§¥ÂÅïËÄÅÔºåÁõ∏‰º¥‰∏ÄÁîüÔºÅ',
                        'Êó©ÁîüË¥µÂ≠ê': 'ÊÑøÊÇ®Êó©ÁîüË¥µÂ≠êÔºåÂÆ∂Â∫≠Âπ∏Á¶èÔºÅ',
                        'ËÅ™Êòé‰º∂‰øê': 'Á•ùÊÇ®ËÅ™Êòé‰º∂‰øêÔºåÊâçÂçéÊ®™Ê∫¢ÔºÅ',
                        'Ê¥ªÊ≥ºÂèØÁà±': 'ÊÑøÊÇ®Ê¥ªÊ≥ºÂèØÁà±ÔºåÂø´‰πêÊó†ÂøßÔºÅ',
                        'Âø´‰πêÊàêÈïø': 'Á•ùÊÇ®Âø´‰πêÊàêÈïøÔºåÂâçÁ®ã‰ººÈî¶ÔºÅ',
                        'ËÅ™ÊòéÊâçÊô∫': 'ÊÑøÊÇ®ËÅ™ÊòéÊâçÊô∫ÔºåÊô∫ÊÖßË∂ÖÁæ§ÔºÅ',
                        'ÂçöÂ≠¶Â§öÊâç': 'Á•ùÊÇ®ÂçöÂ≠¶Â§öÊâçÔºåÂ≠¶ÂØå‰∫îËΩ¶ÔºÅ',
                        'ÊâçÂçéÊ®™Ê∫¢': 'ÊÑøÊÇ®ÊâçÂçéÊ®™Ê∫¢ÔºåÂá∫Á±ªÊãîËêÉÔºÅ',
                        'Âá∫Á±ªÊãîËêÉ': 'Á•ùÊÇ®Âá∫Á±ªÊãîËêÉÔºåÁã¨‰∏ÄÊó†‰∫åÔºÅ',
                        'Áã¨Ê†ë‰∏ÄÂ∏ú': 'ÊÑøÊÇ®Áã¨Ê†ë‰∏ÄÂ∏úÔºåÊ†áÊñ∞Á´ãÂºÇÔºÅ',
                        'Ê†áÊñ∞Á´ãÂºÇ': 'Á•ùÊÇ®Ê†áÊñ∞Á´ãÂºÇÔºåÂà´Âá∫ÂøÉË£ÅÔºÅ',
                        'Âà´Âá∫ÂøÉË£Å': 'ÊÑøÊÇ®Âà´Âá∫ÂøÉË£ÅÔºåÂàõÊÑèÊó†ÈôêÔºÅ',
                        'Á≤æÁõäÊ±ÇÁ≤æ': 'Á•ùÊÇ®Á≤æÁõäÊ±ÇÁ≤æÔºåÂ∞ΩÂñÑÂ∞ΩÁæéÔºÅ',
                        'Â∞ΩÂñÑÂ∞ΩÁæé': 'ÊÑøÊÇ®Â∞ΩÂñÑÂ∞ΩÁæéÔºåÂÆåÁæéÊó†Áº∫ÔºÅ',
                        'ÁæéËΩÆÁæéÂ•Ç': 'Á•ùÊÇ®ÁæéËΩÆÂ•ÇÔºåÁ≤æÂΩ©Á∫∑ÂëàÔºÅ',
                        'Â∑ßÂ§∫Â§©Â∑•': 'ÊÑøÊÇ®Â∑ßÂ§∫Â§©Â∑•ÔºåÈ¨ºÊñßÁ•ûÂ∑•ÔºÅ',
                        'È¨ºÊñßÁ•ûÂ∑•': 'Á•ùÊÇ®È¨ºÊñßÁ•ûÂ∑•ÔºåÊäÄËâ∫Ë∂ÖÁæ§ÔºÅ',
                        'Á¶èÊòüÈ´òÁÖß': 'ÊÑøÊÇ®Á¶èÊòüÈ´òÁÖßÔºåË¥µ‰∫∫Áõ∏Âä©ÔºÅ',
                        'Ë¥µ‰∫∫Áõ∏Âä©': 'Á•ùÊÇ®Ë¥µ‰∫∫Áõ∏Âä©ÔºåÈÄ¢Âá∂ÂåñÂêâÔºÅ',
                        'ÈÄ¢Âá∂ÂåñÂêâ': 'ÊÑøÊÇ®ÈÄ¢Âá∂ÂåñÂêâÔºåÈÅáÈöæÂëàÁ••ÔºÅ',
                        'ÈÅáÈöæÂëàÁ••': 'Á•ùÊÇ®ÈÅáÈöæÂëàÁ••ÔºåÂê¶ÊûÅÊ≥∞Êù•ÔºÅ',
                        'Âê¶ÊûÅÊ≥∞Êù•': 'ÊÑøÊÇ®Âê¶ÊûÅÊ≥∞Êù•ÔºåËΩ¨Âç±‰∏∫ÂÆâÔºÅ',
                        'ËΩ¨Âç±‰∏∫ÂÆâ': 'Á•ùÊÇ®ËΩ¨Âç±‰∏∫ÂÆâÔºåÂåñÈô©‰∏∫Â§∑ÔºÅ',
                        'ÂåñÈô©‰∏∫Â§∑': 'ÊÑøÊÇ®ÂåñÈô©‰∏∫Â§∑ÔºåÂÆâÂ¶ÇÊ≥∞Â±±ÔºÅ',
                        'ÂÆâÂ¶ÇÊ≥∞Â±±': 'Á•ùÊÇ®ÂÆâÂ¶ÇÊ≥∞Â±±ÔºåÁ®≥Â¶ÇÁ£êÁü≥ÔºÅ',
                        'Á®≥Â¶ÇÁ£êÁü≥': 'ÊÑøÊÇ®Á®≥Â¶ÇÁ£êÁü≥ÔºåÂùö‰∏çÂèØÊëßÔºÅ',
                        'È©¨Âà∞ÊàêÂäü': 'Á•ùÊÇ®È©¨Âà∞ÊàêÂäüÔºåÊóóÂºÄÂæóËÉúÔºÅ',
                        'ÊóóÂºÄÂæóËÉú': 'ÊÑøÊÇ®ÊóóÂºÄÂæóËÉúÔºåÁôæÊàòÁôæËÉúÔºÅ',
                        'ÁôæÊàòÁôæËÉú': 'Á•ùÊÇ®ÁôæÊàòÁôæËÉúÔºåÊàòÊó†‰∏çËÉúÔºÅ',
                        'ÊàòÊó†‰∏çËÉú': 'ÊÑøÊÇ®ÊàòÊó†‰∏çËÉúÔºåÊîªÊó†‰∏çÂÖãÔºÅ',
                        'ÊîªÊó†‰∏çÂÖã': 'Á•ùÊÇ®ÊîªÊó†‰∏çÂÖãÔºåÊó†ÂæÄ‰∏çÂà©ÔºÅ',
                        'Êó†ÂæÄ‰∏çÂà©': 'ÊÑøÊÇ®Êó†ÂæÄ‰∏çÂà©ÔºåÈ°∫È£éÈ°∫Ê∞¥ÔºÅ',
                        'È°∫È£éÈ°∫Ê∞¥': 'Á•ùÊÇ®È°∫È£éÈ°∫Ê∞¥ÔºåÊ∞¥Âà∞Ê∏†ÊàêÔºÅ',
                        'Ê∞¥Âà∞Ê∏†Êàê': 'ÊÑøÊÇ®Ê∞¥Âà∞Ê∏†ÊàêÔºåÁìúÁÜüËíÇËêΩÔºÅ',
                        'ÁìúÁÜüËíÇËêΩ': 'Á•ùÊÇ®ÁìúÁÜüËíÇËêΩÔºåÊ∞¥ËêΩÁü≥Âá∫ÔºÅ',
                        'Ê∞¥ËêΩÁü≥Âá∫': 'ÊÑøÊÇ®Ê∞¥ËêΩÁü≥Âá∫ÔºåÁúüÁõ∏Â§ßÁôΩÔºÅ',
                        'ÁúüÁõ∏Â§ßÁôΩ': 'Á•ùÊÇ®ÁúüÁõ∏Â§ßÁôΩÔºåÊ∞¥Ê∏ÖÊúàÊòéÔºÅ',
                        'Ê∞¥Ê∏ÖÊúàÊòé': 'ÊÑøÊÇ®Ê∞¥Ê∏ÖÊúàÊòéÔºåÊúàÁôΩÈ£éÊ∏ÖÔºÅ',
                        'ÊúàÁôΩÈ£éÊ∏Ö': 'Á•ùÊÇ®ÊúàÁôΩÈ£éÊ∏ÖÔºåÈ£éË∞ÉÈõ®È°∫ÔºÅ',
                        'È£éË∞ÉÈõ®È°∫': 'ÊÑøÊÇ®È£éË∞ÉÈõ®È°∫ÔºåÂõΩÊ≥∞Ê∞ëÂÆâÔºÅ',
                        'ÂõΩÊ≥∞Ê∞ëÂÆâ': 'Á•ùÊÇ®ÂõΩÊ≥∞Ê∞ëÂÆâÔºåÈ£éËµ∑‰∫ëÊ∂åÔºÅ',
                        'È£éËµ∑‰∫ëÊ∂å': 'ÊÑøÊÇ®È£éËµ∑‰∫ëÊ∂åÔºå‰∫ëËí∏ÈúûËîöÔºÅ',
                        '‰∫ëËí∏ÈúûËîö': 'Á•ùÊÇ®‰∫ëËí∏ÈúûËîöÔºåÈúûÂÖâ‰∏áÈÅìÔºÅ',
                        'ÈúûÂÖâ‰∏áÈÅì': 'ÊÑøÊÇ®ÈúûÂÖâ‰∏áÈÅìÔºåÂÖâËäí‰∏á‰∏àÔºÅ',
                        'ÂÖâËäí‰∏á‰∏à': 'Á•ùÊÇ®ÂÖâËäí‰∏á‰∏àÔºåÂÖâËæâÁÅøÁÉÇÔºÅ',
                        'ÂÖâËæâÁÅøÁÉÇ': 'ÊÑøÊÇ®ÂÖâËæâÁÅøÁÉÇÔºåÁíÄÁí®Â§∫ÁõÆÔºÅ',
                        'ÁíÄÁí®Â§∫ÁõÆ': 'Á•ùÊÇ®ÁíÄÁí®Â§∫ÁõÆÔºåÁªöÁÉÇÂ§öÂΩ©ÔºÅ',
                        'ÁªöÁÉÇÂ§öÂΩ©': 'ÊÑøÊÇ®ÁªöÁÉÇÂ§öÂΩ©Ôºå‰∫îÂΩ©ÊñëÊñìÔºÅ',
                        '‰∫îÂΩ©ÊñëÊñì': 'Á•ùÊÇ®‰∫îÂΩ©ÊñëÊñìÔºåËâ≤ÂΩ©ÊñëÊñìÔºÅ',
                        'Ëâ≤ÂΩ©ÊñëÊñì': 'ÊÑøÊÇ®Ëâ≤ÂΩ©ÊñëÊñìÔºå‰∏áÁ¥´ÂçÉÁ∫¢ÔºÅ',
                        '‰∏áÁ¥´ÂçÉÁ∫¢': 'Á•ùÊÇ®‰∏áÁ¥´ÂçÉÁ∫¢ÔºåÊò•ÊöñËä±ÂºÄÔºÅ',
                        'Êò•ÊöñËä±ÂºÄ': 'ÊÑøÊÇ®Êò•ÊöñËä±ÂºÄÔºåÊò•ÊÑèÁõéÁÑ∂ÔºÅ',
                        'Êò•ÊÑèÁõéÁÑ∂': 'Á•ùÊÇ®Êò•ÊÑèÁõéÁÑ∂ÔºåÊò•Ëä±ÁßãÊúàÔºÅ',
                        'Êò•Ëä±ÁßãÊúà': 'ÊÑøÊÇ®Êò•Ëä±ÁßãÊúàÔºåËä±Âõ¢Èî¶Á∞áÔºÅ',
                        'Ëä±Âõ¢Èî¶Á∞á': 'Á•ùÊÇ®Ëä±Âõ¢Èî¶Á∞áÔºåÊü≥ÊöóËä±ÊòéÔºÅ',
                        'Êü≥ÊöóËä±Êòé': 'ÊÑøÊÇ®Êü≥ÊöóËä±ÊòéÔºåÂ±±Ê∏ÖÊ∞¥ÁßÄÔºÅ',
                        'Â±±Ê∏ÖÊ∞¥ÁßÄ': 'Á•ùÊÇ®Â±±Ê∏ÖÊ∞¥ÁßÄÔºåÈ∏üËØ≠Ëä±È¶ôÔºÅ',
                        'È∏üËØ≠Ëä±È¶ô': 'ÊÑøÊÇ®È∏üËØ≠Ëä±È¶ôÔºåÈ£éÊôØÂ¶ÇÁîªÔºÅ',
                        'È£éÊôØÂ¶ÇÁîª': 'Á•ùÊÇ®È£éÊôØÂ¶ÇÁîªÔºåÁæé‰∏çËÉúÊî∂ÔºÅ',
                        'Áæé‰∏çËÉúÊî∂': 'ÊÑøÊÇ®Áæé‰∏çËÉúÊî∂ÔºåËµèÂøÉÊÇ¶ÁõÆÔºÅ',
                        'ËµèÂøÉÊÇ¶ÁõÆ': 'Á•ùÊÇ®ËµèÂøÉÊÇ¶ÁõÆÔºåÊ≤Å‰∫∫ÂøÉËÑæÔºÅ',
                        'Ê≤Å‰∫∫ÂøÉËÑæ': 'ÊÑøÊÇ®Ê≤Å‰∫∫ÂøÉËÑæÔºåÂøÉÊó∑Á•ûÊÄ°ÔºÅ',
                        'ÂøÉÊó∑Á•ûÊÄ°': 'Á•ùÊÇ®ÂøÉÊó∑Á•ûÊÄ°ÔºåÁ•ûÊ∏ÖÊ∞îÁàΩÔºÅ',
                        'Á•ûÊ∏ÖÊ∞îÁàΩ': 'ÊÑøÊÇ®Á•ûÊ∏ÖÊ∞îÁàΩÔºåÁ≤æÁ•ûÁÑïÂèëÔºÅ',
                        'Á≤æÁ•ûÁÑïÂèë': 'Á•ùÊÇ®Á≤æÁ•ûÁÑïÂèëÔºåÂÆπÂÖâÁÑïÂèëÔºÅ',
                        'ÂÆπÂÖâÁÑïÂèë': 'ÊÑøÊÇ®ÂÆπÂÖâÁÑïÂèëÔºåÈùíÊò•Ê∞∏È©ªÔºÅ'
                    };
                    
                    return descriptions[text] || `ÊÑøÊÇ®${text}ÔºåÊñ∞Âπ¥Âø´‰πêÔºÅ`;
                },

                createSuperLuckyConfetti() {
                    const confettiContainer = document.querySelector('.confetti');
                    if (!confettiContainer) return;
                    
                    for (let i = 0; i < 100; i++) {
                        setTimeout(() => {
                            const confetti = document.createElement('div');
                            confetti.className = 'confetti-piece';
                            confetti.style.left = Math.random() * 100 + '%';
                            confetti.style.animationDelay = Math.random() * 2 + 's';
                            confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';
                            confetti.style.background = ['#FFD700', '#DC143C', '#FF69B4', '#00CED1', '#32CD32'][Math.floor(Math.random() * 5)];
                            
                            confettiContainer.appendChild(confetti);
                            
                            setTimeout(() => {
                                confetti.remove();
                            }, 4000);
                        }, i * 50);
                    }
                },

                closeFortuneResult() {
                    this.showFortuneResult = false;
                },

                saveFortune() {
                    const newFortune = {
                        id: Date.now(),
                        text: this.fortuneResult.text,
                        type: this.fortuneResult.type,
                        date: new Date().toLocaleString('zh-CN'),
                        description: this.fortuneResult.description
                    };
                    
                    this.myFortunes.unshift(newFortune);
                    this.saveMyFortunes();
                    this.closeFortuneResult();
                    
                    alert('Á•àÊÑøÁ≠æÂ∑≤‰øùÂ≠òÂà∞ÊÇ®ÁöÑÊî∂Ëóè‰∏≠ÔºÅüéâ');
                },

                showMyFortune() {
                    this.showMyFortunePage = true;
                },

                closeMyFortune() {
                    this.showMyFortunePage = false;
                },

                // ÊÑøÊúõÂ¢ôÁõ∏ÂÖ≥ÊñπÊ≥ï
                initWishWall() {
                    this.loadWishWall();
                    this.startWishWallAnimation();
                },

                loadWishWall() {
                    // ‰ºòÂÖà‰ªé‰∫ëÁ´ØÂä†ËΩΩÊï∞ÊçÆ
                    if (this.firebaseInitialized) {
                        this.loadWishWallFromCloud();
                    } else {
                        // Â¶ÇÊûúÊ≤°Êúâ‰∫ëÁ´ØËøûÊé•Ôºå‰ªéÊú¨Âú∞Âä†ËΩΩ
                        this.loadWishWallFromLocal();
                    }
                },

                loadWishWallFromCloud() {
                    if (!this.firebaseInitialized) return;

                    const db = firebase.database();
                    db.ref('wishWall').once('value').then((snapshot) => {
                        const cloudWishWall = snapshot.val();
                        
                        if (cloudWishWall) {
                            // ‰ªé‰∫ëÁ´ØËé∑ÂèñÂà∞Êï∞ÊçÆ
                            const wishList = Object.values(cloudWishWall);
                            this.wishWall = wishList;
                            // ‰øùÂ≠òÂà∞Êú¨Âú∞‰Ωú‰∏∫Â§á‰ªΩ
                            this.saveWishWallToLocal();
                            console.log('‰ªé‰∫ëÁ´ØÂä†ËΩΩÊÑøÊúõÂ¢ôÊï∞ÊçÆ:', wishList.length, 'Êù°ÊÑøÊúõ');
                        } else {
                            // ‰∫ëÁ´ØÊ≤°ÊúâÊï∞ÊçÆÔºå‰ªéÊú¨Âú∞Âä†ËΩΩ
                            this.loadWishWallFromLocal();
                        }
                    }).catch((error) => {
                        console.error('‰ªé‰∫ëÁ´ØÂä†ËΩΩÊÑøÊúõÂ¢ôÂ§±Ë¥•:', error);
                        // Â¶ÇÊûú‰∫ëÁ´ØÂä†ËΩΩÂ§±Ë¥•Ôºå‰ªéÊú¨Âú∞Âä†ËΩΩ
                        this.loadWishWallFromLocal();
                    });
                },

                loadWishWallFromLocal() {
                    const saved = localStorage.getItem('wishWall');
                    if (saved) {
                        this.wishWall = JSON.parse(saved);
                        console.log('‰ªéÊú¨Âú∞Âä†ËΩΩÊÑøÊúõÂ¢ôÊï∞ÊçÆ:', this.wishWall.length, 'Êù°ÊÑøÊúõ');
                    } else {
                        this.wishWall = [];
                    }
                },

                saveWishWallToLocal() {
                    localStorage.setItem('wishWall', JSON.stringify(this.wishWall));
                },

                startWishWallAnimation() {
                    if (this.wishWallInterval) {
                        clearInterval(this.wishWallInterval);
                    }

                    this.currentWishIndex = 0;
                    this.updateWishWallDisplay();
                    
                    this.wishWallInterval = setInterval(() => {
                        this.updateWishWallDisplay();
                    }, 18000);
                },

                updateWishWallDisplay() {
                    if (this.wishWall.length === 0) {
                        this.currentWishDisplay = [];
                        return;
                    }

                    // Âæ™ÁéØÊòæÁ§∫ÊâÄÊúâÊÑøÊúõÔºåÊØèÊ¨°ÊòæÁ§∫3‰∏™
                    const displayCount = Math.min(3, this.wishWall.length);
                    this.currentWishDisplay = [];
                    
                    for (let i = 0; i < displayCount; i++) {
                        const index = (this.currentWishIndex + i) % this.wishWall.length;
                        this.currentWishDisplay.push(this.wishWall[index]);
                    }
                    
                    this.currentWishIndex = (this.currentWishIndex + displayCount) % this.wishWall.length;
                    
                    setTimeout(() => {
                        this.currentWishDisplay = [];
                    }, 17000);
                },

                addWishToWall(wishData) {
                    const wish = {
                        id: Date.now().toString(),
                        name: wishData.name,
                        wish: wishData.wish,
                        timestamp: new Date().toISOString(),
                        deviceId: this.deviceId
                    };

                    this.wishWall.unshift(wish);
                    this.saveWishWallToLocal();
                    this.updateWishWallDisplay();

                    // Â¶ÇÊûúÊúâ‰∫ëÁ´ØËøûÊé•Ôºå‰øùÂ≠òÂà∞‰∫ëÁ´Ø
                    if (this.firebaseInitialized) {
                        this.saveWishToCloud(wish);
                    }
                },

                async saveWishToCloud(wish) {
                    if (!this.firebaseInitialized) return;

                    try {
                        const db = firebase.database();
                        await db.ref(`wishWall/${wish.id}`).set(wish);
                        console.log('ÊÑøÊúõÂ∑≤‰øùÂ≠òÂà∞‰∫ëÁ´Ø:', wish.name);
                    } catch (error) {
                        console.error('‰øùÂ≠òÊÑøÊúõÂà∞‰∫ëÁ´ØÂ§±Ë¥•:', error);
                    }
                },

                toggleWishWall() {
                    this.wishWallVisible = !this.wishWallVisible;
                },

                // ËÆæÂ§áËØÜÂà´ÂíåÁî®Êà∑ÁÆ°ÁêÜ
                initDevice() {
                    this.generateDeviceId();
                    this.checkUserWishStatus();
                },

                generateDeviceId() {
                    let deviceId = localStorage.getItem('deviceId');
                    if (!deviceId) {
                        deviceId = 'device_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                        localStorage.setItem('deviceId', deviceId);
                    }
                    this.deviceId = deviceId;
                },

                checkUserWishStatus() {
                    const userWish = localStorage.getItem(`userWish_${this.deviceId}`);
                    if (userWish) {
                        this.hasMadeWish = true;
                        this.userWishData = JSON.parse(userWish);
                        
                        // Êõ¥Êñ∞ËÆ∏ÊÑøË°®ÂçïÊòæÁ§∫Áî®Êà∑‰πãÂâçÁöÑÊï∞ÊçÆ
                        this.wishForm = {
                            name: this.userWishData.name,
                            gender: this.userWishData.gender,
                            birthday: this.userWishData.birthday,
                            wish: this.userWishData.wish
                        };
                    }
                },

                saveUserWish(wishData) {
                    const userWish = {
                        deviceId: this.deviceId,
                        ...wishData,
                        timestamp: new Date().toLocaleString('zh-CN')
                    };
                    localStorage.setItem(`userWish_${this.deviceId}`, JSON.stringify(userWish));
                    this.hasMadeWish = true;
                    this.userWishData = userWish;
                },

                viewMyWish() {
                    alert(`ÊÇ®ÁöÑÊÑøÊúõÔºö${this.userWishData?.wish}\nËÆ∏ÊÑøÊó∂Èó¥Ôºö${this.userWishData?.timestamp}`);
                },

                // Firebase ÂàùÂßãÂåñÂíåÈÖçÁΩÆ
                initFirebase() {
                    // Firebase ÈÖçÁΩÆ - ËØ∑ÊõøÊç¢‰∏∫‰Ω†Ëá™Â∑±ÁöÑÈÖçÁΩÆ
                    const firebaseConfig = {
                        apiKey: "demo-api-key",
                        authDomain: "demo.firebaseapp.com",
                        databaseURL: "https://demo-default-rtdb.firebaseio.com",
                        projectId: "demo-project",
                        storageBucket: "demo.appspot.com",
                        messagingSenderId: "123456789",
                        appId: "demo-app-id"
                    };

                    try {
                        // ÂàùÂßãÂåñ Firebase
                        if (!firebase.apps.length) {
                            firebase.initializeApp(firebaseConfig);
                        }
                        
                        // Ê£ÄÊü• Firebase ÊòØÂê¶ÂàùÂßãÂåñÊàêÂäü
                        this.firebaseInitialized = true;
                        console.log('Firebase ÂàùÂßãÂåñÊàêÂäü');
                        
                        // Âä†ËΩΩ‰∫ëÁ´ØÊï∞ÊçÆ
                        this.loadCloudData();
                        
                    } catch (error) {
                        console.error('Firebase ÂàùÂßãÂåñÂ§±Ë¥•:', error);
                        this.firebaseError = error.message;
                        this.firebaseInitialized = false;
                    }
                },

                // ‰ªé‰∫ëÁ´ØÂä†ËΩΩÊï∞ÊçÆ
                async loadCloudData() {
                    if (!this.firebaseInitialized) return;

                    try {
                        const db = firebase.database();
                        
                        // Âä†ËΩΩÊÑøÊúõÂ¢ôÊï∞ÊçÆ
                        const wishWallSnapshot = await db.ref('wishWall').once('value');
                        const cloudWishWall = wishWallSnapshot.val();
                        
                        if (cloudWishWall) {
                            // ÂêàÂπ∂‰∫ëÁ´ØÊï∞ÊçÆÂà∞Êú¨Âú∞
                            this.wishWall = Object.values(cloudWishWall);
                            this.saveWishWall(); // ‰øùÂ≠òÂà∞Êú¨Âú∞‰Ωú‰∏∫Â§á‰ªΩ
                        }

                        // Âä†ËΩΩÁî®Êà∑ÊÑøÊúõÊï∞ÊçÆ
                        const userWishesSnapshot = await db.ref('userWishes').once('value');
                        const cloudUserWishes = userWishesSnapshot.val();
                        
                        if (cloudUserWishes && this.deviceId) {
                            const userWish = cloudUserWishes[this.deviceId];
                            if (userWish) {
                                this.hasMadeWish = true;
                                this.userWishData = userWish;
                                // Êõ¥Êñ∞Êú¨Âú∞Â≠òÂÇ®
                                localStorage.setItem(`userWish_${this.deviceId}`, JSON.stringify(userWish));
                            }
                        }

                        // ËÆæÁΩÆÂÆûÊó∂ÁõëÂê¨
                        this.setupRealtimeListeners();
                        
                    } catch (error) {
                        console.error('Âä†ËΩΩ‰∫ëÁ´ØÊï∞ÊçÆÂ§±Ë¥•:', error);
                    }
                },

                // ËÆæÁΩÆÂÆûÊó∂Êï∞ÊçÆÁõëÂê¨
                setupRealtimeListeners() {
                    if (!this.firebaseInitialized) return;

                    const db = firebase.database();
                    
                    // ÁõëÂê¨ÊÑøÊúõÂ¢ôÂèòÂåñ
                    db.ref('wishWall').on('value', (snapshot) => {
                        const cloudWishWall = snapshot.val();
                        if (cloudWishWall) {
                            this.wishWall = Object.values(cloudWishWall);
                            this.saveWishWallToLocal();
                            console.log('ÂÆûÊó∂Êõ¥Êñ∞ÊÑøÊúõÂ¢ôÊï∞ÊçÆ:', this.wishWall.length, 'Êù°ÊÑøÊúõ');
                        }
                    });

                    // ÁõëÂê¨Áî®Êà∑ÊÑøÊúõÂèòÂåñ
                    if (this.deviceId) {
                        db.ref(`userWishes/${this.deviceId}`).on('value', (snapshot) => {
                            const userWish = snapshot.val();
                            if (userWish) {
                                this.hasMadeWish = true;
                                this.userWishData = userWish;
                                localStorage.setItem(`userWish_${this.deviceId}`, JSON.stringify(userWish));
                            }
                        });
                    }
                },

                // ‰øùÂ≠òÊï∞ÊçÆÂà∞‰∫ëÁ´Ø
                async saveToCloud(path, data) {
                    if (!this.firebaseInitialized) return false;

                    try {
                        const db = firebase.database();
                        await db.ref(path).set(data);
                        return true;
                    } catch (error) {
                        console.error('‰øùÂ≠òÂà∞‰∫ëÁ´ØÂ§±Ë¥•:', error);
                        return false;
                    }
                },

                // ÂêåÊ≠•ÊÑøÊúõÂà∞‰∫ëÁ´Ø
                async syncWishToCloud(wishData) {
                    if (!this.firebaseInitialized) return;

                    try {
                        const db = firebase.database();
                        const timestamp = new Date().toISOString();
                        const wishWithTimestamp = { ...wishData, timestamp };

                        // ‰øùÂ≠òÂà∞‰∫ëÁ´Ø
                        await db.ref(`userWishes/${this.deviceId}`).set(wishWithTimestamp);
                        
                        // ÂêåÊó∂Ê∑ªÂä†Âà∞ÊÑøÊúõÂ¢ô
                        const wishWallEntry = {
                            ...wishData,
                            timestamp,
                            deviceId: this.deviceId,
                            id: Date.now().toString()
                        };
                        
                        await db.ref(`wishWall/${wishWithTimestamp.id}`).set(wishWallEntry);
                        
                    } catch (error) {
                        console.error('ÂêåÊ≠•ÊÑøÊúõÂà∞‰∫ëÁ´ØÂ§±Ë¥•:', error);
                    }
                },

                // ËÆ°ÁÆóÂ±ûÊÄß
                fortuneStickType() {
                    if (this.fortuneResult.type === 'super-lucky') {
                        return 'super-lucky';
                    }
                    return 'normal';
                }
            }
        }).mount('#app');
    </script>
</body>
</html>